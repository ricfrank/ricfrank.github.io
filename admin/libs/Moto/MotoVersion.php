<?php
class MotoVersion { const VERSION = '1.3.0'; static function getVersion() { return self::VERSION; } static function parseVersion($version) { $ans = array('version' => 1.1, 'build' => 0); if (preg_match("/^([0-9]+)[\.]?([0-9]+)?[\.]?([0-9]*)?$/i", $version, $match)) { $ans['version'] = $match[1]*1 . '.' . $match[2]*1; $ans['build'] = $match[3]*1; } return $ans; } static function isNeedUpdate() { $result = false; if ( !defined('CONTROL_PANEL_VERSION') ) return true; if ( !defined('CLIENT_VERSION') ) return true; $current = self::parseVersion(self::getVersion()); $cpVersion = self::parseVersion(CONTROL_PANEL_VERSION); if ($current['version'] > $cpVersion['version'] || ($current['version'] == $cpVersion['version'] && $current['build'] > $cpVersion['build']) ) return true; $tVersion = self::parseVersion(CLIENT_VERSION); if ($current['version'] > $tVersion['version'] || ($current['version'] == $tVersion['version'] && $current['build'] > $tVersion['build']) ) return true; return false; } }