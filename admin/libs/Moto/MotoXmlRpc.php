<?php
class MotoXmlRpc { private $XMLRPC_POINT = 'http://components.motocms.com/xmlrpc_server.php'; private $_client; private $_userData; public function __construct($point = null) { if (!is_null($point) && is_string($point) && trim($point) != '') $this->XMLRPC_POINT = trim($point); } private function _getClient() { if (is_null($this->_userData)) { $content = new ContentService(); $this->_userData = $content->getProductInfo(); unset($content); } if (is_null($this->_client)) $this->_client = new Zend_XmlRpc_Client($this->XMLRPC_POINT); return $this->_client; } function sendRequest($method, $arg) { $result = null; try { $client = $this->_getClient(); $request = array( 'product_id' => $this->_userData['product_id'], 'version' => MotoVersion::getVersion(), 'request' => $arg ); $result = $this->_client->call($method, array($request)); } catch(Exception $e) { throw $e; } return $result; } }