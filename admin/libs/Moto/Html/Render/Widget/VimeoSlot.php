<?php
class Moto_Html_Render_Widget_VimeoSlot extends Moto_Html_Render_Widget_Abstract { function proccess($obj, $parent = null) { $this->_module = $obj; if (isset($obj->properties['controlsColor'])) $obj->properties['controlsColor']['value'] = strtolower(trim($obj->properties['controlsColor']['value'], '#')); $this->_parent = $parent; $html = $this->_proccess($obj); return $html; } function _proccess($obj) { $html = ''; $content = ''; $obj->type = $obj->getType()->getExtraData('jsClass'); if (isset($obj->properties['video']['value'])) { if (preg_match('/\.com\/([0-9]+)/', $obj->properties['video']['value'], $match)) { $obj->properties['video']['value'] = $match[1]; } } $data = array( 'id' => 'widget_' . $obj->id, 'class' => $this->getCssClass($obj), 'style' => $this->getStyle($obj), 'content' => $content, 'widget' => Moto_Html_Util::implodeArraySimple( $obj ), 'widget.properties' => Moto_Html_Util::implodeArray( $obj->properties ), 'widget.parameters' => Moto_Html_Util::implodeArray( $obj->parameters ), ); $template = $obj->getTemplate('main'); if ($template == '') $template = $this->getTemplate('main'); $html = $this->_render($template, $data); return $html; } }