<?php
 require 'Zend/Mail.php'; class MotoMail extends Zend_Mail { public function __construct($charset = 'utf-8') { parent::__construct($charset); } public function loadBodyHtmlFromTemplate($template, $params) { if (!file_exists($template)) { throw new ErrorException("File \"{$template}\" could not be found"); } if (!is_readable($template)) { throw new ErrorException("File \"{$template}\" is not readable"); } $vars = explode(',', '%' . implode("%,%", array_keys($params)) . '%'); $values = array_values($params); $body = preg_replace('/%([\w_]+)%/i', '', str_replace($vars, $values, file_get_contents($template))); $this->setBodyHtml($body); return $this; } }